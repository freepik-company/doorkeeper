# This file contains the configuration for the Doorkeeper service.
# The whole file supports environment variables expansion,
# so you can use them in any part of the file

# (Required) Authorization configuration such as the type or its potential parameters
authorization:
  type: hmac # hmac
  param:
    type: query # header|query
    name: token

# (Optional) When authorization is configured as HMAC, this section is required
hmac:
  type: url
  encryptionKey: "${ENVIRONMENT_VARIABLE_WITH_ENCRYPTION_KEY}"
  encryptionAlgorithm: "sha256"

  url:
    # (Optional) Transforms special characters (including /) with %XX sequences as needed
    # When lowerEncode is true, encoded chars will be lowercase (e.g. %2f instead of %2F)
    earlyEncode: true
    lowerEncode: true

# (Optional) List of modifiers to apply to the request before signing it
modifiers:

  - type: path
    path:
      pattern: ^(/[a-zA-Z0-9\-_]/)
      replace: ""

  #- type: header
  #  header:
  #    # TODO
